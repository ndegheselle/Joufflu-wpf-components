<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Joufflu.Data"
    xmlns:font="clr-namespace:Joufflu.Shared.Resources.Fonts;assembly=Joufflu.Shared"
    xmlns:s="clr-namespace:System;assembly=mscorlib">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/Joufflu.Shared;component/Styles/NamedStyles/IconButton.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style TargetType="{x:Type local:Paging}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:Paging}">
                    <Grid DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock VerticalAlignment="Center">Per page</TextBlock>
                            <ComboBox
                                Margin="4,0,0,0"
                                SelectedIndex="0"
                                ItemsSource="{Binding AvailableCapacities}"
                                SelectedItem="{Binding Capacity}" />
                            <TextBlock VerticalAlignment="Center">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Total}" Value="-1">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                                <TextBlock.Text>
                                    <MultiBinding StringFormat="Per page {1} {2}-{3} of {4}">
                                        <Binding Path="Capacity" />
                                        <Binding Path="IntervalMin" />
                                        <Binding Path="IntervalMax" />
                                        <Binding Path="Total" />
                                    </MultiBinding>
                                </TextBlock.Text>
                            </TextBlock>
                        </StackPanel>

                        <StackPanel
                            Orientation="Horizontal"
                            Grid.Column="1"
                            HorizontalAlignment="Right">
                            <Button Command="{Binding FirstCommand}">
                                <Button.Style>
                                    <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Total}" Value="-1">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                                <TextBlock
                                    Text="{x:Static font:IconFont.SkipBack}"
                                    FontFamily="{DynamicResource FontAwesomeSolid}"
                                    FontSize="10" />
                            </Button>
                            <Button Command="{Binding PreviousCommand}" Margin="1,0,6,0">
                                <TextBlock
                                    Text="{x:Static font:IconFont.CaretLeft}"
                                    FontFamily="{DynamicResource FontAwesomeSolid}"
                                    FontSize="10" />
                            </Button>

                            <TextBox
                                x:Name="PART_InputPage"
                                MinWidth="26"
                                HorizontalContentAlignment="Center"
                                VerticalContentAlignment="Center"
                                Text="{Binding PageNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                            <TextBlock
                                Margin="4,0"
                                VerticalAlignment="Center"
                                Text="{Binding PageMax, StringFormat='/ {0}'}">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Total}" Value="-1">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding PageMax}" Value="{x:Static s:Int32.MaxValue}">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>

                            <Button Command="{Binding NextCommand}" Margin="6,0,0,0">
                                <TextBlock
                                    Text="{x:Static font:IconFont.CaretRight}"
                                    FontFamily="{DynamicResource FontAwesomeSolid}"
                                    FontSize="10" />
                            </Button>
                            <Button Command="{Binding LastCommand}" Margin="1,0,0,0">
                                <Button.Style>
                                    <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Total}" Value="-1">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                                <TextBlock
                                    Text="{x:Static font:IconFont.SkipForward}"
                                    FontFamily="{DynamicResource FontAwesomeSolid}"
                                    FontSize="10" />
                            </Button>
                        </StackPanel>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
